const theme3PickupData = [
    {
        date: '(01/14/2026) Scout! -',
        idols: [
            { star: 5, title: '(card name)', name: 'Tomoya Mashiro', image: '' },
            { star: 4, title: '(card name)', name: 'Souma Kanzaki', image: '' },
            { star: 3, title: '(card name)', name: 'Leo Tsukinaga', image: '' },
            { star: 3, title: '(card name)', name: 'Hokuto Hidaka', image: '' }
        ]
    },
    {
        date: '(12/30/2025) Scout! Sincerity Will Be Rewarded',
        idols: [
            { star: 5, title: '(The Heavens Will Reward Feelings)', name: 'Hiiro Amagi', image: 'card_square2_4651_evolution' },
            { star: 4, title: '(The Heavens Will Reward Hard Effort)', name: 'Hinata Aoi', image: 'card_square2_4652_evolution' },
            { star: 3, title: '(The Heavens Will Reward Spirit)', name: 'Kohaku Oukawa', image: 'card_square2_4653_evolution' },
            { star: 3, title: '(The Heavens Will Reward Hard Work)', name: 'Raika', image: 'card_square2_4654_evolution' }
        ]
    },
    {
        date: '(12/14/2025) Scout! Arsène',
        idols: [
            { star: 5, title: '(Fake Dead)', name: 'Keito Hasumi', image: 'card_square2_4636_evolution' },
            { star: 4, title: '(Fake Magic)', name: 'Natsume Sakasaki', image: 'card_square2_4637_evolution' },
            { star: 3, title: '(Fake Stage)', name: 'Wataru Hibiki', image: 'card_square2_4638_evolution' },
            { star: 3, title: '(Fake Test)', name: 'Yume', image: 'card_square2_4639_evolution' }
        ]
    },
    {
        date: '(11/29/2025) Scout! White Wonderland',
        idols: [
            { star: 5, title: '(Brand New World)', name: 'Esu', image: 'card_square2_4623_evolution' },
            { star: 4, title: '(Familiar World)', name: 'Madara Mikejima', image: 'card_square2_4624_evolution' },
            { star: 3, title: '(Surveyed World)', name: 'Yuzuru Fushimi', image: 'card_square2_4625_evolution' },
            { star: 3, title: '(Unknown World)', name: 'Yuta Aoi', image: 'card_square2_4626_evolution' }
        ]
    },
    {
        date: '(10/30/2025) Scout! Arcadian',
        idols: [
            { star: 5, title: '(Guardian of Peace)', name: 'Midori Takamine', image: 'card_square2_4542_evolution' },
            { star: 4, title: '(Guardian of the Undiscovered)', name: 'Yuzuru Fushimi', image: 'card_square2_4543_evolution' },
            { star: 3, title: '(Guardian of Simplicity)', name: 'Mao Isara', image: 'card_square2_4544_evolution' },
            { star: 3, title: '(Guardian of Nature)', name: 'Arashi Narukami', image: 'card_square2_4545_evolution' }
        ]
    },
    {
        date: '(10/14/2025) Scout! Nightfall Séance',
        idols: [
            { star: 5, title: '(Séance Lead)', name: 'Izumi Sena', image: 'card_square2_4521_evolution' },
            { star: 4, title: '(Séance Witness)', name: 'Koga Ogami', image: 'card_square2_4522_evolution' },
            { star: 3, title: '(Séance Host)', name: 'Kanata Shinkai', image: 'card_square2_4523_evolution' },
            { star: 3, title: '(Séance Participant)', name: 'Tatsumi Kazehaya', image: 'card_square2_4524_evolution' }
        ]
    },
    {
        date: '(9/29/2025) Scout! Witchcraft',
        idols: [
            { star: 5, title: '(Search Witch)', name: 'Arashi Narukami', image: 'card_square2_4503_evolution' },
            { star: 4, title: '(Reach Witch)', name: 'Chiaki Morisawa', image: 'card_square2_4504_evolution' },
            { star: 3, title: '(Watch Witch)', name: 'Hiiro Amagi', image: 'card_square2_4505_evolution' },
            { star: 3, title: '(Catch Witch)', name: 'Shu Itsuki', image: 'card_square2_4506_evolution' }
        ]
    },
    {
        date: '(9/14/2025) Scout! Royal Flush',
        idols: [
            { star: 5, title: '(Attempting a Gamble)', name: 'Rinne Amagi', image: 'card_square2_4492_evolution' },
            { star: 4, title: '(Succeeding a Gamble)', name: 'Kaoru Hakaze', image: 'card_square2_4493_evolution' },
            { star: 3, title: '(Skillful Gamble)', name: 'Ibara Saegusa', image: 'card_square2_4494_evolution' },
            { star: 3, title: '(Whimsical Gamble)', name: 'Leo Tsukinaga', image: 'card_square2_4495_evolution' }
        ]
    },
    {
        date: '(8/14/2025) Scout! Oniyasha',
        idols: [
            { star: 5, title: '(Oniyasha\'s Karma)', name: 'Kuro Kiryu', image: 'card_square2_4465_evolution' },
            { star: 4, title: '(Oniyasha\'s Mystery)', name: 'Suou Tsukasa', image: 'card_square2_4466_evolution' },
            { star: 3, title: '(Oniyasha\'s Shadow)', name: 'Shinobu Sengoku', image: 'card_square2_4467_evolution' },
            { star: 3, title: '(Oniyasha\'s Ritual)', name: 'Kanna', image: 'card_square2_4468_evolution' }
        ]
    },
    {
        date: '(7/14/2025) Scout! Heated Gaze',
        idols: [
            { star: 5, title: '(Unbreakable Gaze)', name: 'Hajime Shino', image: 'card_square2_4437_evolution' },
            { star: 4, title: '(Captivating Gaze)', name: 'Tatsumi Kazehaya', image: 'card_square2_4438_evolution' },
            { star: 3, title: '(Crossing Gaze)', name: 'Souma Kanzaki', image: 'card_square2_4439_evolution' },
            { star: 3, title: '(Unexpected Gaze)', name: 'Esu', image: 'card_square2_4440_evolution' }
        ]
    }
];

const theme3ScoutData = [
    {
        title: "Theme Scout 3",
        star: 5,
        idols: [
            `images/btn-tenshouin_eichi.webp`,
            `images/btn-hibiki_wataru.webp`,
            `images/btn-himemiya_tori.webp`,
            `images/btn-fushimi_yuzuru.webp`,
            `images/btn-hidaka_hokuto.webp`,
            `images/btn-akehoshi_subaru.webp`,
            `images/btn-yuuki_makoto.webp`,
            `images/btn-isara_mao.webp`,
            `images/btn-nagumo_tetora.webp`,
            `images/btn-sengoku_shinobu.webp`,
            `images/btn-morisawa_chiaki.webp`,
            `images/btn-shinkai_kanata.webp`,
            `images/btn-shiratori_aira.webp`,
            `images/btn-ayase_mayoi.webp`,
            `images/btn-kazehaya_tatsumi.webp`,
            `images/btn-ran_nagisa.webp`,
            `images/btn-tomoe_hiyori.webp`,
            `images/btn-saegusa_ibara.webp`,
            `images/btn-sazanami_jun.webp`,
            `images/btn-itsuki_shu.webp`,
            `images/btn-kagehira_mika.webp`,
            `images/btn-aoi_hinata.webp`,
            `images/btn-aoi_yuta.webp`,
            `images/btn-himeru.webp`,
            `images/btn-oukawa_kohaku.webp`,
            `images/btn-shiina_niki.webp`,
            `images/btn-sakuma_rei.webp`,
            `images/btn-hakaze_kaoru.webp`,
            `images/btn-ogami_koga.webp`,
            `images/btn-otogari_adonis.webp`,
            `images/btn-nito_nazuna.webp`,
            `images/btn-tenma_mitsuru.webp`,
            `images/btn-kanzaki_souma.webp`,
            `images/btn-taki_ibuki.webp`,
            `images/btn-suou_tsukasa.webp`,
            `images/btn-tsukinaga_leo.webp`,
            `images/btn-sakuma_ritsu.webp`,
            `images/btn-sakasaki_natsume.webp`,
            `images/btn-aoba_tsumugi.webp`,
            `images/btn-harukawa_sora.webp`,
            `images/btn-mikejima_madara.webp`,
            `images/btn-kanna.webp`,
            `images/btn-yume.webp`,
            `images/btn-raika.webp`,
        ],
    },
    {
        title: "Theme Scout 3",
        star: 4,
        idols: [
            `images/btn-tenshouin_eichi.webp`,
            `images/btn-hibiki_wataru.webp`,
            `images/btn-himemiya_tori.webp`,
            `images/btn-hidaka_hokuto.webp`,
            `images/btn-akehoshi_subaru.webp`,
            `images/btn-yuuki_makoto.webp`,
            `images/btn-isara_mao.webp`,
            `images/btn-nagumo_tetora.webp`,
            `images/btn-takamine_midori.webp`,
            `images/btn-sengoku_shinobu.webp`,
            `images/btn-shinkai_kanata.webp`,
            `images/btn-amagi_hiiro.webp`,
            `images/btn-shiratori_aira.webp`,
            `images/btn-ayase_mayoi.webp`,
            `images/btn-ran_nagisa.webp`,
            `images/btn-tomoe_hiyori.webp`,
            `images/btn-saegusa_ibara.webp`,
            `images/btn-sazanami_jun.webp`,
            `images/btn-itsuki_shu.webp`,
            `images/btn-kagehira_mika.webp`,
            `images/btn-aoi_yuta.webp`,
            `images/btn-amagi_rinne.webp`,
            `images/btn-himeru.webp`,
            `images/btn-oukawa_kohaku.webp`,
            `images/btn-shiina_niki.webp`,
            `images/btn-sakuma_rei.webp`,
            `images/btn-otogari_adonis.webp`,
            `images/btn-mashiro_tomoya.webp`,
            `images/btn-nito_nazuna.webp`,
            `images/btn-tenma_mitsuru.webp`,
            `images/btn-shino_hajime.webp`,
            `images/btn-hasumi_keito.webp`,
            `images/btn-kiryu_kuro.webp`,
            `images/btn-taki_ibuki.webp`,
            `images/btn-tsukinaga_leo.webp`,
            `images/btn-sena_izumi.webp`,
            `images/btn-sakuma_ritsu.webp`,
            `images/btn-narukami_arashi.webp`,
            `images/btn-aoba_tsumugi.webp`,
            `images/btn-harukawa_sora.webp`,
            `images/btn-esu.webp`,
            `images/btn-kanna.webp`,
            `images/btn-yume.webp`,
            `images/btn-raika.webp`,
        ],
    },
];

function renderTheme3Pickups() {
    const container = document.getElementById('theme3-pickup-container');
    if (!container) return;
    
    theme3PickupData.forEach(dateGroup => {
        const dateSection = document.createElement('div');
        dateSection.className = 'date-section';
        
        const dateBanner = document.createElement('div');
        dateBanner.className = 'date-banner';
        dateBanner.textContent = dateGroup.date;
        
        const idolsContainer = document.createElement('div');
        idolsContainer.className = 'idols-container';
        
        dateGroup.idols.forEach(idol => {
            const section = document.createElement('div');
            section.className = 'pickup-section';
            
            section.innerHTML = `
                <div class="pickup-header">
                    <span>⭐${idol.star}</span>
                </div>
                <div class="idol-card">
                    <img src="ts3_icons/${idol.image}.webp" alt="${idol.name}" class="idol-image">
                    <div class="idol-info">
                        <p class="idol-title">${idol.title}</p>
                        <p class="idol-name">${idol.name}</p>
                    </div>
                </div>
            `;
            
            idolsContainer.appendChild(section);
        });
        
        dateSection.appendChild(dateBanner);
        dateSection.appendChild(idolsContainer);
        container.appendChild(dateSection);
    });
}

function renderTheme3Scouts() {
    const container = document.getElementById('theme3-scout-container');
    if (!container) return;
    
    const divider = document.createElement('div');
    divider.className = 'section-divider';
    divider.innerHTML = `
        <hr>
        <h2 class="section-label">Remaining Idol/s</h2>
    `;
    container.appendChild(divider);
    
    const scoutSection = document.createElement('div');
    scoutSection.className = 'scout-section';
    
    const japanDate = getJapanDate();
    
    theme3ScoutData.forEach(scout => {
        const table = document.createElement('table');
        table.className = 'scout-table';
        
        const maxIdols = 58;
        const idolsArray = [...scout.idols];
        while (idolsArray.length < maxIdols) {
            idolsArray.push('');
        }
        
        table.innerHTML = `
            <tr class="scout-date-row">
                <td class="scout-date-cell" colspan="2">${japanDate}</td>
            </tr>
            <tr class="scout-title-row">
                <td class="scout-title-cell">${scout.title}</td>
                <td class="scout-star-cell">☆${scout.star}</td>
            </tr>
            <tr class="scout-idols-row">
                <td colspan="2">
                    <div class="scout-idols-grid">
                        ${idolsArray.map(img => `
                            <div class="scout-idol-cell${img ? '' : ' hidden'}">
                                ${img ? `<img src="${img}" alt="idol">` : ''}
                            </div>
                        `).join('')}
                    </div>
                </td>
            </tr>
        `;
        
        scoutSection.appendChild(table);
    });
    
    container.appendChild(scoutSection);
}

document.addEventListener('DOMContentLoaded', () => {
    renderTheme3Pickups();
    renderTheme3Scouts();
    
    const scoutBtns = document.querySelectorAll('.scout-nav-btn');
    const scoutContents = document.querySelectorAll('.scout-content');
    
    scoutBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const targetScout = btn.dataset.scout;
            const currentActive = document.querySelector('.scout-content.active');
            const targetContent = document.getElementById(`${targetScout}-content`);
            
            if (currentActive === targetContent) return;
            
            const overlay = document.createElement('div');
            overlay.className = 'slide-overlay';
            document.body.appendChild(overlay);
            
            setTimeout(() => overlay.classList.add('sliding-in'), 10);
            
            setTimeout(() => {
                scoutBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                currentActive.classList.remove('active');
                targetContent.classList.add('active');
                
                overlay.classList.remove('sliding-in');
                overlay.classList.add('sliding-out');
            }, 500);
            
            setTimeout(() => {
                overlay.remove();
            }, 1000);
        });
    });
    
    const hamburger = document.querySelector(".hamburger");
    if (hamburger) {
        hamburger.addEventListener("click", () => {
            const open = document.body.classList.toggle("nav-open");
            hamburger.setAttribute("aria-expanded", open ? "true" : "false");
        });
    }
    
    window.addEventListener("resize", () => {
        if (window.innerWidth > 700 && document.body.classList.contains("nav-open")) {
            document.body.classList.remove("nav-open");
            if (hamburger) hamburger.setAttribute("aria-expanded", "false");
        }
    });
    
    document.addEventListener("click", (e) => {
        if (!document.body.classList.contains("nav-open")) return;
        const inside = e.target.closest(".navbar");
        if (!inside) {
            document.body.classList.remove("nav-open");
            if (hamburger) hamburger.setAttribute("aria-expanded", "false");
        }
    });
});
